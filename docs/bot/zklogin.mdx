---
title: "zkLogin Authentication"
description: "Secure wallet creation using Google OAuth and zero-knowledge proofs"
---

# zkLogin Authentication

zkLogin is Sui's innovative authentication system that lets you create and use blockchain wallets with familiar OAuth loginâ€”no seed phrases, no private key management.

## What is zkLogin?

zkLogin combines three technologies:

1. **OAuth 2.0** - Sign in with Google, Facebook, or other providers
2. **Zero-Knowledge Proofs** - Cryptographic proof of authentication without revealing credentials
3. **Deterministic Wallets** - Your Google account ID maps to a unique Sui address

<Info>
  zkLogin is **native to Sui blockchain**. DeepMirror leverages this protocol for seamless authentication.
</Info>

## How zkLogin Works

### Traditional Crypto Wallets

```
User â†’ Generate Random Private Key â†’ Derive Address
      â†’ Backup 12/24 Word Seed Phrase
      â†’ Never Lose It Or Funds Are Gone Forever
```

**Problems:**
- Seed phrases are hard to remember
- Easy to lose or compromise
- Poor user experience
- Scares away mainstream users

### zkLogin Approach

```
User â†’ Sign in with Google
     â†’ OAuth Token Generated
     â†’ Zero-Knowledge Proof Created
     â†’ Deterministic Address Derived
     â†’ No Seed Phrase Needed
```

**Benefits:**
- âœ… Familiar OAuth flow
- âœ… Nothing to backup or remember
- âœ… Same wallet every time you sign in
- âœ… Cryptographically secure
- âœ… Fully self-custodial

## DeepMirror's zkLogin Implementation

### Authentication Flow

1. **Initiate Login**
   - User taps "Sign in with Google"
   - Bot generates authentication URL
   - URL includes:
     - Redirect URI
     - Nonce (random string)
     - Client ID

2. **OAuth in Browser**
   - User clicks auth link
   - Opens in default browser
   - Google OAuth consent screen appears
   - User approves permissions

3. **Redirect with JWT**
   - Google redirects to callback URL
   - URL contains JWT (JSON Web Token)
   - JWT proves user's identity
   - User copies full redirect URL

4. **ZK Proof Generation**
   - User pastes URL back in Telegram
   - Bot extracts JWT from URL
   - Generates zero-knowledge proof:
     - Proves JWT is valid
     - Without revealing JWT itself
   - Creates ephemeral key pair

5. **Wallet Derivation**
   - Computes wallet address from:
     - Google account ID (sub field in JWT)
     - OAuth provider (Google)
     - zkLogin salt
   - Address is deterministic
   - Same Google account = Same address always

6. **Session Storage**
   - Ephemeral key pair stored in database
   - Linked to user's Telegram ID
   - Valid for 7 days (max epoch)
   - After expiry, re-authenticate

### What Gets Stored?

In the database:

```typescript
{
  telegram_id: number,           // Your Telegram user ID
  ephemeral_public_key: string,  // Public part of key pair
  ephemeral_private_key: string, // Private part (encrypted)
  max_epoch: number,             // Expiration (7 days)
  randomness: string,            // ZK randomness
  jwt: string                    // Your OAuth token
}
```

<Warning>
  This data is **encrypted at rest** in Supabase. Still, never share your zkLogin session with anyone!
</Warning>

## Sign In with Google

### Step-by-Step

1. **Open Wallet Menu**
   ```
   /wallet
   ```

2. **Tap Sign In**
   ```
   ðŸ” Wallet
   > Sign in with Google
   ```

3. **Click Auth Link**
   - Bot sends a message with a link
   - Click the link (opens in browser)
   - Don't use in-app Telegram browser (won't work)

4. **Approve OAuth**
   - Google asks you to sign in (if not already)
   - Shows permissions request:
     - "DeepMirror wants to access your email"
     - This is normal for OAuth
   - Click **Allow**

5. **Copy Redirect URL**
   - After approval, Google redirects to callback
   - You'll see a URL like:
     ```
     https://authflow.sui.io/#id_token=eyJ...&...
     ```
   - **Copy the ENTIRE URL** (including `#` and everything after)

6. **Paste in Telegram**
   - Return to DeepMirror bot
   - Paste the full URL
   - Bot processes the JWT
   - Wallet created!

<Tip>
  The URL contains sensitive data. Only paste it in the DeepMirror bot, never share publicly!
</Tip>

### Success Confirmation

```
âœ… zkLogin Successful!

Your Wallet:
Address: 0x1a2b3c4d5e6f...
Provider: Google
Status: Active
Expires: Feb 14, 2026

You can now copy trade!
```

## Session Management

### Session Duration

zkLogin sessions last **7 days** (max epoch on Sui).

After 7 days:
- Session expires automatically
- Bot can no longer sign transactions
- Your wallet still exists (it's on-chain)
- Simply re-authenticate to continue

### Check Session Status

View in `/wallet`:

```
zkLogin Session
Status: âœ… Active
Expires: 5 days, 3 hours
Provider: Google
Email: your@gmail.com (hidden)
```

### Renew Session

When session expires (or any time before):

1. Go to `/wallet`
2. Tap **Sign in with Google**
3. Complete OAuth flow
4. Session renewed for another 7 days

<Note>
  Renewing your session **does NOT change your wallet address**. Same Google account = same address forever.
</Note>

## Security Considerations

### What zkLogin Protects

âœ… **Your private key never leaves Sui**
- zkLogin doesn't generate traditional private keys
- Signing happens via ZK proof + ephemeral key
- No single point of compromise

âœ… **OAuth token stays private**
- Zero-knowledge proof hides the JWT
- Even if someone intercepts communication, they can't reconstruct your key

âœ… **Deterministic recovery**
- Lose your phone? Just sign in again with Google
- Same wallet address restored

### What You Must Protect

ðŸ”’ **Your Google account**
- If compromised, attacker can authenticate zkLogin
- Use 2FA on your Google account
- Strong password

ðŸ”’ **Your redirect URL**
- Contains your JWT token
- Anyone with this can create ZK proof
- Only valid for a few minutes, but still sensitive

ðŸ”’ **Bot's database**
- Ephemeral keys stored here
- If leaked, attacker can sign for remaining session duration
- DeepMirror encrypts this data

### zkLogin vs. Traditional Wallets

| Feature | zkLogin | Traditional Wallet |
|---------|---------|-------------------|
| Setup | OAuth flow (30 seconds) | Generate + Backup seed phrase (5+ mins) |
| Recovery | Sign in with Google | Must have seed phrase backup |
| Loss Risk | Low (Google account) | High (lose seed = lose funds) |
| Privacy | Provider knows you use blockchain | Fully anonymous |
| Custody | Self-custodial | Self-custodial |
| Export | Can export private key | Already have private key |

## Advanced: Technical Details

### Address Derivation

Your zkLogin address is computed as:

```
address = H(
  iss,           // OAuth issuer (e.g., "https://accounts.google.com")
  aud,           // Client ID
  sub,           // Your Google account ID (unique, stable)
  address_seed   // Additional randomness
)
```

This is **deterministic**: same `sub` (Google ID) + same `address_seed` = same address.

### Ephemeral Key Pairs

For each session, a temporary key pair is generated:

```
ephemeral_sk, ephemeral_pk = generateKeyPair()
```

- Used to sign transactions
- Valid only until `max_epoch`
- Destroyed after expiration

### ZK Proof Structure

When signing a transaction:

```
proof = zkProof(
  jwt,              // Your OAuth token
  ephemeral_pk,     // Public key for this session
  randomness,       // ZK randomness
  nonce             // Prevents replay attacks
)

signature = sign(
  transaction,
  ephemeral_sk,
  proof
)
```

Validators verify:
1. Ephemeral signature is valid
2. ZK proof is valid
3. Max epoch not exceeded
4. Everything matches the address

### Max Epoch

Sui works in "epochs" (~24 hours each).

zkLogin sessions can span max **10 epochs** (~10 days), but:
- Most implementations use 7 days for safety
- After expiration, proof is invalid
- Must re-authenticate with OAuth

## Troubleshooting

<AccordionGroup>
  <Accordion title="OAuth redirect not working">
    **Common causes:**
    1. Using in-app Telegram browser â†’ Open in external browser
    2. Didn't copy entire URL â†’ Must include `#` and everything after
    3. Waited too long â†’ Redirect expires in 5 minutes
    
    **Solution:** Start fresh, use external browser, copy full URL quickly.
  </Accordion>

  <Accordion title="Session expired">
    **Normal behavior** after 7 days.
    
    **Solution:**
    1. Go to `/wallet`
    2. Tap **Sign in with Google**
    3. Complete OAuth (same account)
    4. Wallet address unchanged, session renewed
  </Accordion>

  <Accordion title="Different wallet address appeared">
    **Likely causes:**
    1. Different Google account used
    2. Different address_seed (shouldn't happen in DeepMirror)
    
    **Solution:**
    - Use the **exact same Google account** every time
    - Contact support if persists
  </Accordion>

  <Accordion title="Can't sign transactions">
    **Check:**
    1. zkLogin session active? (see `/wallet`)
    2. Session expired? Re-authenticate
    3. Capability granted? Check wallet settings
    
    **Solution:** Verify session, re-auth if needed, ensure capability exists.
  </Accordion>

  <Accordion title="Want to export private key">
    **zkLogin doesn't use traditional private keys**, but you can:
    
    1. Go to `/wallet`
    2. Tap **ðŸ”‘ Export Wallet**
    3. Receive ephemeral private key
    4. Import to Sui Wallet
    
    **Note:** This is the ephemeral key, not a "seed phrase". It expires with the session.
  </Accordion>
</AccordionGroup>

## zkLogin vs. Regular Wallets

### When to Use zkLogin

âœ… You want easy onboarding
âœ… You trust OAuth provider (Google)
âœ… You don't want to manage seed phrases
âœ… Quick testing and prototyping
âœ… Mainstream user experience

### When to Use Traditional Wallet

âœ… Maximum privacy (no OAuth provider)
âœ… Long-term cold storage
âœ… You're comfortable with seed phrases
âœ… Don't want session expiration
âœ… Critical production funds

<Tip>
  For DeepMirror, zkLogin is ideal: easy access, frequent re-authentication is fine, and you can always export keys later!
</Tip>

## Privacy Considerations

### What Google Knows

When you use zkLogin with Google:
- Google knows you authenticated with a Sui app
- Google sees your email accessed "DeepMirror"
- Google **doesn't** know:
  - Your blockchain address
  - Your transaction history
  - Your balances

### What Sui Validators Know

Sui blockchain validators see:
- Your wallet address
- Your transactions
- zkLogin proof (but not your JWT)
- Validators **don't** know:
  - Your Google email
  - Your identity
  - Connection between address and OAuth account

### Privacy-Maximized Setup

1. **Use a separate Google account**
   - Create new account for blockchain only
   - Don't link to personal identity

2. **Use VPN when authenticating**
   - Hides IP from Google/Sui

3. **Don't reuse addresses**
   - Can create multiple zkLogin wallets
   - Different addresses for different purposes

## Next Steps

<CardGroup cols={2}>
  <Card title="Wallet Management" icon="wallet" href="/bot/wallet">
    Manage balances and exports
  </Card>

  <Card title="Copy Trading" icon="copy" href="/bot/copy-trading">
    Start copying traders
  </Card>

  <Card title="Security Guide" icon="shield" href="/advanced/security">
    Protect your wallet
  </Card>

  <Card title="Sui zkLogin Docs" icon="book" href="https://docs.sui.io/concepts/cryptography/zklogin">
    Official zkLogin documentation
  </Card>
</CardGroup>
